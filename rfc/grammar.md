Prev: [Overview](overview.md)   
Next: [Classes](classes.md)

---

# Section 3: Grammar

**This file is automatically generated. If you wish to submit a PR, do not
edit this file directly. Please edit
[templates/rfc/grammar.md](https://github.com/Ovid/Cor/tree/master/templates/rfc/grammar.md) instead.**

---

To make this more manageable and not define a grammar for all of Perl, we will break the grammar out into separate components for simplicity.

# 3.1 Class and Role Grammar
The primary grammar looks like:

```
Corinna     ::= CLASS | ROLE
CLASS       ::= DESCRIPTOR? 'class' NAMESPACE DECLARATION? BLOCK
DESCRIPTOR  ::= 'abstract'
ROLE        ::= 'role' NAMESPACE ROLES? BLOCK
NAMESPACE   ::= IDENTIFIER { '::' IDENTIFIER } VERSION? 
DECLARATION ::= PARENT? ROLES?
PARENT      ::= 'isa' NAMESPACE
ROLES       ::= 'does' NAMESPACE { ',' NAMESPACE } ','?
IDENTIFIER  ::= [:alpha:] {[:alnum:]}
VERSION     ::= # all currently allowed version numbers
BLOCK       ::= # Perl +/- Extras
```

We recommend [semantic versioning](https://semver.org/), but in we allow all
existing Perl version formats to facilitate upgarding existing modules.

# 3.2 Method Grammar
The method grammar (skipping some bits to avoid defining a grammar for Perl):

```
METHOD        ::= 'method' ACCESS_LEVELS SIGNATURE '{' (perl code) '}'
SIGNATURE     ::= IDENTIFIER '(' current sub argument structure + extra work from Dave Mitchell ')'
ACCESS_LEVELS ::= ACCESS_LEVEL { ACCESS_LEVEL }
ACCESS_LEVEL  ::= ':' { 'private' | 'overrides' | 'common' }
```

# 3.3 Slot Grammar
"Slots" in Corinna parlance are the variables where class and instance data are stored.

For simplicity: `SCALAR`, `ARRAY`, and `HASH` refer to their corresponding variable names. `PERL_EXPRESSION` means what it says. `IDENTIFIER` is a valid Perl identifier.

```
SLOT            ::= INSTANCE | SHARED ';'
SHARED          ::= 'my' { SCALAR | ARRAY | HASH } DEFAULT?
INSTANCE        ::= 'slot'    SLOT_DEFINITION
SLOT_DEFINITION ::= SCALAR ATTRIBUTES? DEFAULT?  | { ARRAY | HASH } DEFAULT? 
DEFAULT         ::= '=' PERL_EXPRESSION
ATTRIBUTE       ::= ':' ( 'param' MODIFIER? | 'reader' MODIFIER? | 'writer' MODIFIER? |  'predicate' MODIFIER?  | 'name' MODIFIER? | HANDLES )
ATTRIBUTES      ::= { ATTRIBUTE }
HANDLES         ::= 'handles' '(' 
                                    IDENTIFIER { ',' IDENTIFIER }    # list of methods this slot handles
                                 |  PAIR { ',' PAIR }                # map of methods (to, from) this slot handles
                                 | '*'                               # this slot handles all unknown methods, but inheritance takes precedence
                              ')'
PAIR            ::= IDENTIFIER  ':' IDENTIFIER
MODIFIER        ::= '(' IDENTIFIER ')'
IDENTIFIER      ::= [:alpha:] {[:alnum:]}
```


---

Prev: [Overview](overview.md)   
Next: [Classes](classes.md)
